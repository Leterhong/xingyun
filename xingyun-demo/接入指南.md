# é­”çæ˜Ÿäº‘å…·èº«é©±åŠ¨SDKï¼ˆJSç‰ˆæœ¬ï¼‰æ¥å…¥æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨æœ¬é¡¹ç›®ä¸­æ¥å…¥å’Œä½¿ç”¨é­”çæ˜Ÿäº‘å…·èº«é©±åŠ¨SDKã€‚

## ğŸ“‹ æ¥å…¥æ­¥éª¤æ¦‚è§ˆ

1. [å¼•å…¥SDKè„šæœ¬](#1-å¼•å…¥sdkè„šæœ¬)
2. [åˆ›å»ºæ•°å­—äººå®ä¾‹](#2-åˆ›å»ºæ•°å­—äººå®ä¾‹)
3. [åˆå§‹åŒ–è¿æ¥](#3-åˆå§‹åŒ–è¿æ¥)
4. [é©±åŠ¨æ•°å­—äººè¯´è¯](#4-é©±åŠ¨æ•°å­—äººè¯´è¯)
5. [çŠ¶æ€ç®¡ç†](#5-çŠ¶æ€ç®¡ç†)
6. [é›†æˆå¤§æ¨¡å‹](#6-é›†æˆå¤§æ¨¡å‹)
7. [Widgetäº‹ä»¶å¤„ç†](#7-widgetäº‹ä»¶å¤„ç†)

---

## 1. å¼•å…¥SDKè„šæœ¬

### 1.1 åœ¨ HTML ä¸­å¼•å…¥

åœ¨ `index.html` ä¸­æ·»åŠ SDKè„šæœ¬å¼•ç”¨ï¼ˆ**å·²å®Œæˆ**ï¼‰ï¼š

```html
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>é­”çæ˜Ÿäº‘ - AI BIåˆ†æå¸ˆ</title>
  </head>
  <body>
    <div id="app"></div>
    <!-- å¼•å…¥é­”çæ˜Ÿäº‘å…·èº«é©±åŠ¨SDK -->
    <script src="https://media.xingyun3d.com/xingyun3d/general/litesdk/xmovAvatar@latest.js"></script>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
```

### 1.2 ç‰ˆæœ¬è¯´æ˜

- ä½¿ç”¨ `@latest` è·å–æœ€æ–°ç‰ˆæœ¬SDK
- å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒé”å®šå…·ä½“ç‰ˆæœ¬å·ï¼Œå¦‚ `xmovAvatar@0.1.0-alpha.72`

---

## 2. åˆ›å»ºæ•°å­—äººå®ä¾‹

### 2.1 å°è£…SDKæœåŠ¡

åœ¨ `src/services/xingyun.ts` ä¸­å°è£…SDKï¼ˆ**å·²å®Œæˆ**ï¼‰ï¼š

```typescript
export class XingyunService {
  private sdk: any = null
  
  constructor(config: XingyunConfig) {
    this.config = {
      gatewayServer: 'https://nebula-agent.xingyun3d.com/user/v1/ttsa/session',
      ...config
    }
  }

  async init(options?: { onDownloadProgress?: (progress: number) => void }) {
    if (!window.XmovAvatar) {
      throw new Error('é­”çæ˜Ÿäº‘SDKæœªåŠ è½½ï¼Œè¯·æ£€æŸ¥scriptæ ‡ç­¾')
    }

    this.sdk = new window.XmovAvatar({
      containerId: this.config.containerId,
      appId: this.config.appId,
      appSecret: this.config.appSecret,
      gatewayServer: this.config.gatewayServer,
      onMessage: this.config.onMessage,
      onStateChange: this.config.onStateChange,
      onStatusChange: this.config.onStatusChange,
      onNetworkInfo: this.config.onNetworkInfo,
      onVoiceStateChange: this.config.onVoiceStateChange,
      onWidgetEvent: this.config.onWidgetEvent,
      proxyWidget: this.config.proxyWidget,
      enableLogger: this.config.enableLogger || false
    })

    await this.sdk.init(options)
  }
}
```

### 2.2 åˆå§‹åŒ–å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| containerId | string | âœ… | å®¹å™¨å…ƒç´ IDï¼ˆéœ€è¦æœ‰æ˜ç¡®çš„å®½é«˜ï¼‰ |
| appId | string | âœ… | ä»é­”çæ˜Ÿäº‘å¹³å°è·å– |
| appSecret | string | âœ… | ä»é­”çæ˜Ÿäº‘å¹³å°è·å– |
| gatewayServer | string | âœ… | æ•°å­—äººæœåŠ¡æ¥å£å®Œæ•´è·¯å¾„ |
| onMessage | function | âŒ | SDKæ¶ˆæ¯å›è°ƒ |
| onStateChange | function | âŒ | çŠ¶æ€å˜åŒ–å›è°ƒ |
| onStatusChange | function | âŒ | è¿æ¥çŠ¶æ€å›è°ƒ |
| onNetworkInfo | function | âŒ | ç½‘ç»œä¿¡æ¯å›è°ƒ |
| onVoiceStateChange | function | âŒ | è¯­éŸ³çŠ¶æ€å›è°ƒ |
| onWidgetEvent | function | âŒ | Widgetäº‹ä»¶å›è°ƒï¼ˆè‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼‰ |
| proxyWidget | object | âŒ | ä»£ç†æ¸²æŸ“å™¨ |
| enableLogger | boolean | âŒ | æ˜¯å¦æ‰“å°SDKæ—¥å¿— |

---

## 3. åˆå§‹åŒ–è¿æ¥

### 3.1 åœ¨ç»„ä»¶ä¸­åˆå§‹åŒ–

åœ¨ `src/components/AvatarPanel.vue` ä¸­åˆå§‹åŒ–SDKï¼ˆ**å·²å®Œæˆ**ï¼‰ï¼š

```vue
<template>
  <div class="avatar-container">
    <div id="xingyun-sdk"></div>
  </div>
</template>

<script setup>
const initSDK = async () => {
  xingyunService = new XingyunService({
    containerId: '#xingyun-sdk',
    appId: props.config.appId,
    appSecret: props.config.appSecret,
    onMessage: handleSDKMessage,
    onStateChange: handleStateChange,
    onNetworkInfo: handleNetworkInfo,
    onVoiceStateChange: handleVoiceStateChange,
    proxyWidget: {
      'subtitle_on': (data) => {
        subtitle.value = data.text
      },
      'subtitle_off': () => {
        subtitle.value = ''
      }
    }
  })

  await xingyunService.init({
    onDownloadProgress: (progress) => {
      loadingProgress.value = progress
    }
  })
}

onMounted(() => {
  if (props.config.appId && props.config.appSecret) {
    initSDK()
  }
})
</script>
```

### 3.2 å®¹å™¨è¦æ±‚

- å¿…é¡»æœ‰æ˜ç¡®çš„å®½é«˜ï¼ˆå»ºè®®æœ€å° 400x600ï¼‰
- èƒŒæ™¯è‰²å»ºè®®ä¸ºé»‘è‰² `#000`
- éœ€è¦æ”¯æŒ WebGL 2.0

---

## 4. é©±åŠ¨æ•°å­—äººè¯´è¯

### 4.1 éæµå¼è°ƒç”¨

é€‚ç”¨äºçŸ­æ–‡æœ¬æˆ–ä¸€æ¬¡æ€§è¾“å‡ºï¼š

```typescript
xingyunService.speak("æ¬¢è¿ä½¿ç”¨é­”çæ˜Ÿäº‘", true, true)
```

### 4.2 æµå¼è°ƒç”¨ï¼ˆæ¨èï¼‰

é€‚ç”¨äºå¤§æ¨¡å‹æµå¼è¾“å‡ºï¼Œä½“éªŒæ›´æµç•…ï¼š

```typescript
// 1. åˆ‡æ¢åˆ°æ€è€ƒçŠ¶æ€
xingyunService.think()

// 2. æµå¼è°ƒç”¨
let isFirst = true
let buffer = ''

await llmService.sendStream(text, (chunk, done) => {
  buffer += chunk
  
  // é¦–æ¬¡ç§¯æ”’20-30å­—
  if (isFirst && buffer.length >= 20) {
    xingyunService.speak(buffer, true, false)
    buffer = ''
    isFirst = false
  }
  // åç»­æ¯10å­—å‘é€ä¸€æ¬¡
  else if (!isFirst && buffer.length >= 10) {
    xingyunService.speak(buffer, false, false)
    buffer = ''
  }
  
  // æœ€åä¸€æ¬¡
  if (done && buffer) {
    xingyunService.speak(buffer, isFirst, true)
  }
})

// 3. å›åˆ°å¾…æœºçŠ¶æ€
setTimeout(() => {
  xingyunService.interactiveidle()
}, 1000)
```

### 4.3 speak å‚æ•°è¯´æ˜

```typescript
speak(ssml: string, is_start: boolean, is_end: boolean): void
```

- `ssml`ï¼šè¦è¯´çš„å†…å®¹ï¼ˆæ”¯æŒSSMLæ ¼å¼ï¼‰
- `is_start`ï¼šæ˜¯å¦æ˜¯ç¬¬ä¸€å¥ï¼ˆé¦–æ¬¡è°ƒç”¨ä¸º trueï¼‰
- `is_end`ï¼šæ˜¯å¦æ˜¯æœ€åä¸€å¥ï¼ˆæœ€åè°ƒç”¨ä¸º trueï¼‰

### 4.4 æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦é™åˆ¶**ï¼š
- speak ä¸å…è®¸è¿ç»­å¤šæ¬¡è°ƒç”¨ï¼ˆå³ `is_end=true` åç«‹å³å†æ¬¡ speakï¼‰
- å»ºè®®ä¸­é—´ä½¿ç”¨ `interactive_idle` æˆ– `listen` æ–¹æ³•åšçŠ¶æ€åˆ‡æ¢
- `onVoiceStateChange` ä¼šæŠ›å‡º `voice_start` å’Œ `voice_end` äº‹ä»¶ç”¨äºç®¡ç†è¯´è¯çŠ¶æ€

---

## 5. çŠ¶æ€ç®¡ç†

### 5.1 æ•°å­—äººçŠ¶æ€åˆ—è¡¨

| çŠ¶æ€ | ä¸­æ–‡å | è¯´æ˜ | APIæ–¹æ³• |
|------|--------|------|---------|
| offlineMode | ç¦»çº¿æ¨¡å¼ | ä¸æ¶ˆè€—ç§¯åˆ† | `offlineMode()` |
| onlineMode | åœ¨çº¿æ¨¡å¼ | ä»ç¦»çº¿æ¨¡å¼å›åˆ°åœ¨çº¿æ¨¡å¼ | `onlineMode()` |
| idle | å¾…æœºç­‰å¾… | é•¿æ—¶é—´æ— äº¤äº’ | `idle()` |
| interactive_idle | å¾…æœºäº’åŠ¨ | äº¤äº’çŠ¶æ€åˆ‡æ¢å‰çš„å¾ªç¯çŠ¶æ€ | `interactiveidle()` |
| listen | å€¾å¬ | ç”¨æˆ·è¾“å…¥æ—¶ | `listen()` |
| think | æ€è€ƒ | ç”¨æˆ·æé—®åæœªå›å¤ | `think()` |
| speak | è¯´è¯ | æ•°å­—äººå›ç­”æ—¶ | `speak()` |

### 5.2 çŠ¶æ€åˆ‡æ¢ç¤ºä¾‹

```typescript
// ç”¨æˆ·å¼€å§‹è¯´è¯æ—¶
xingyunService.listen()

// ç”¨æˆ·è¯´å®Œï¼Œç­‰å¾…AIå›å¤
xingyunService.think()

// AIå¼€å§‹å›ç­”
xingyunService.speak(text, true, false)

// AIå›ç­”å®Œæ¯•ï¼Œå›åˆ°å¾…æœº
xingyunService.interactiveidle()

// é•¿æ—¶é—´ä¸ç”¨ï¼Œåˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼
xingyunService.offlineMode()
```

### 5.3 çŠ¶æ€ç›‘å¬

```typescript
onStateChange: (state: string) => {
  console.log('å½“å‰çŠ¶æ€:', state)
  // æ›´æ–°UIæ˜¾ç¤º
  currentState.value = state
  isSpeaking.value = state === 'speak'
}
```

---

## 6. é›†æˆå¤§æ¨¡å‹

### 6.1 LLMæœåŠ¡å°è£…

åœ¨ `src/services/llm.ts` ä¸­å°è£…å¤§æ¨¡å‹è°ƒç”¨ï¼ˆ**å·²å®Œæˆ**ï¼‰ï¼š

```typescript
export class LLMService {
  async sendStream(
    userMessage: string,
    onChunk: (chunk: string, done: boolean) => void
  ) {
    const response = await fetch(`${this.config.baseURL}/chat/completions`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.config.apiKey}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        model: this.config.model,
        messages: this.conversationHistory,
        stream: true
      })
    })

    const reader = response.body?.getReader()
    const decoder = new TextDecoder()
    let assistantMessage = ''

    while (true) {
      const { done, value } = await reader.read()
      if (done) {
        onChunk('', true)
        break
      }

      const chunk = decoder.decode(value, { stream: true })
      // è§£æå¹¶å¤„ç†æ•°æ®...
    }
  }
}
```

### 6.2 æ”¯æŒçš„å¤§æ¨¡å‹

æœ¬é¡¹ç›®æ”¯æŒä»¥ä¸‹å¤§æ¨¡å‹ï¼ˆå¯åœ¨é…ç½®é¡µé¢é€‰æ‹©ï¼‰ï¼š

1. **è±†åŒ…ï¼ˆå­—èŠ‚è·³åŠ¨ï¼‰**
   - `doubao-pro-32k` - æ€§èƒ½ç‰ˆ
   - `doubao-lite-32k` - è½»é‡ç‰ˆ

2. **DeepSeek**
   - `deepseek-chat` - é€šç”¨å¯¹è¯æ¨¡å‹

3. **é€šä¹‰åƒé—®ï¼ˆé˜¿é‡Œäº‘ï¼‰**
   - `qwen-plus` - å¢å¼ºç‰ˆ

4. **ChatGPTï¼ˆOpenAIï¼‰**
   - `gpt-4` - GPT-4
   - `gpt-3.5-turbo` - GPT-3.5

### 6.3 å¤§æ¨¡å‹é…ç½®

ä¸åŒæ¨¡å‹éœ€è¦é…ç½®å¯¹åº”çš„ `baseURL`ï¼š

```typescript
const modelConfigs = {
  'doubao-pro-32k': {
    baseURL: 'https://ark.cn-beijing.volces.com/api/v3'
  },
  'deepseek-chat': {
    baseURL: 'https://api.deepseek.com'
  },
  'qwen-plus': {
    baseURL: 'https://dashscope.aliyuncs.com/compatible-mode/v1'
  },
  'gpt-4': {
    baseURL: 'https://api.openai.com/v1'
  }
}
```

---

## 7. Widgetäº‹ä»¶å¤„ç†

### 7.1 é»˜è®¤æ”¯æŒçš„äº‹ä»¶

SDKé»˜è®¤æ”¯æŒä»¥ä¸‹äº‹ä»¶ï¼š

- `subtitle_on` - æ˜¾ç¤ºå­—å¹•
- `subtitle_off` - éšè—å­—å¹•
- `widget_pic` - æ˜¾ç¤ºå›¾ç‰‡

### 7.2 ä½¿ç”¨ä»£ç†æ¸²æŸ“å™¨

```typescript
proxyWidget: {
  'subtitle_on': (data: any) => {
    subtitle.value = data.text
  },
  'subtitle_off': () => {
    subtitle.value = ''
  },
  'widget_pic': (data: any) => {
    console.log('å›¾ç‰‡widget:', data)
    // åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºå›¾ç‰‡
  },
  'widget_slideshow': (data: any) => {
    console.log('è½®æ’­å›¾:', data)
    // è‡ªå®šä¹‰è½®æ’­å›¾é€»è¾‘
  },
  'widget_video': (data: any) => {
    console.log('è§†é¢‘:', data)
    // è‡ªå®šä¹‰è§†é¢‘æ’­æ”¾é€»è¾‘
  }
}
```

### 7.3 ä½¿ç”¨è‡ªå®šä¹‰æ¸²æŸ“å™¨

å¦‚æœéœ€è¦å®Œå…¨è‡ªå®šä¹‰æ‰€æœ‰äº‹ä»¶å¤„ç†ï¼š

```typescript
onWidgetEvent: (data: any) => {
  console.log('Widgetäº‹ä»¶:', data)
  
  switch(data.type) {
    case 'subtitle_on':
      // è‡ªå®šä¹‰å­—å¹•æ˜¾ç¤º
      break
    case 'widget_pic':
      // è‡ªå®šä¹‰å›¾ç‰‡æ˜¾ç¤º
      break
    case 'custom_event':
      // è‡ªå®šä¹‰äº‹ä»¶å¤„ç†
      break
  }
}
```

### 7.4 äº‹ä»¶ä¼˜å…ˆçº§

äº‹ä»¶ç³»ç»Ÿä¼˜å…ˆçº§ï¼š
```
onWidgetEvent > proxyWidget > é»˜è®¤äº‹ä»¶
```

---

## 8. SSMLä¸KAåŠ¨ä½œ

### 8.1 è¯­ä¹‰KAæŒ‡ä»¤

è®©æ•°å­—äººåœ¨è¯´è¯æ—¶åšå‡ºç‰¹å®šåŠ¨ä½œï¼š

```xml
<speak>
  çƒ­çƒˆ
  <ue4event>
    <type>ka_intent</type>
    <data><ka_intent>Welcome</ka_intent></data>
  </ue4event>
  æ¬¢è¿å„ä½è´µå®¾åœ¨ç™¾å¿™ä¹‹ä¸­æ‹¨å†—è…ä¸´æŒ‡å¯¼ï¼
</speak>
```

### 8.2 æŠ€èƒ½KAæŒ‡ä»¤

è®©æ•°å­—äººæ‰§è¡Œç‰¹å®šæŠ€èƒ½ï¼ˆå¦‚è·³èˆï¼‰ï¼š

```xml
<speak>
  <ue4event>
    <type>ka</type>
    <data><action_semantic>dance</action_semantic></data>
  </ue4event>
</speak>
```

### 8.3 Speak KAæŒ‡ä»¤

åœ¨è¯´è¯çš„åŒæ—¶åšåŠ¨ä½œï¼š

```xml
<speak>
  <ue4event>
    <type>ka</type>
    <data><action_semantic>Hello</action_semantic></data>
  </ue4event>
  æ¬¢è¿æ¥åˆ°æ˜Ÿäº‘å…·èº« 3D æ•°å­—äººå¹³å°ï½
</speak>
```

---

## 9. é”™è¯¯å¤„ç†

### 9.1 é”™è¯¯ç è¯´æ˜

| ç±»å‹ | é”™è¯¯ç  | æè¿° |
|------|--------|------|
| åˆå§‹åŒ–é”™è¯¯ | 10001 | å®¹å™¨ä¸å­˜åœ¨ |
| | 10002 | Socketè¿æ¥é”™è¯¯ |
| | 10003 | ä¼šè¯å¯åŠ¨å¤±è´¥ |
| èµ„æºé”™è¯¯ | 30001 | èƒŒæ™¯å›¾ç‰‡åŠ è½½é”™è¯¯ |
| | 30002 | è¡¨æƒ…æ•°æ®åŠ è½½é”™è¯¯ |
| | 30004 | è§†é¢‘ä¸‹è½½é”™è¯¯ |
| è§£ç é”™è¯¯ | 40001 | éŸ³é¢‘è§£ç é”™è¯¯ |
| | 40002 | è¡¨æƒ…è§£ç é”™è¯¯ |
| | 40003 | è§†é¢‘è§£ç é”™è¯¯ |
| ç½‘ç»œé—®é¢˜ | 50001 | ç¦»çº¿æ¨¡å¼ |
| | 50002 | åœ¨çº¿æ¨¡å¼ |
| | 50003 | ç½‘ç»œé‡è¯• |
| | 50004 | ç½‘ç»œæ–­å¼€ |

### 9.2 é”™è¯¯å¤„ç†ç¤ºä¾‹

```typescript
onMessage: (message: any) => {
  if (message.code && message.code !== 0) {
    console.error('SDKé”™è¯¯:', message)
    
    switch(message.code) {
      case 10001:
        ElMessage.error('å®¹å™¨å…ƒç´ ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥DOM')
        break
      case 10002:
        ElMessage.error('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ')
        break
      case 50004:
        ElMessage.warning('ç½‘ç»œå·²æ–­å¼€ï¼Œæ­£åœ¨é‡è¿...')
        break
      default:
        ElMessage.warning(`SDKè­¦å‘Š: ${message.message}`)
    }
  }
}
```

---

## 10. æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 10.1 ç§¯åˆ†èŠ‚çœ

- âœ… è°ƒè¯•æ—¶ä½¿ç”¨åŸºç¡€éŸ³è‰²
- âœ… é•¿æ—¶é—´ä¸ç”¨æ—¶åˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼
- âœ… åˆç†æ§åˆ¶å¯¹è¯é¢‘ç‡

### 10.2 ä½“éªŒä¼˜åŒ–

- âœ… ä½¿ç”¨æµå¼è¾“å‡ºæå‡å“åº”é€Ÿåº¦
- âœ… é¦–æ¬¡ç§¯æ”’20-30å­—å†å¼€å§‹æ’­æ”¾
- âœ… åç»­æ¯10å­—å‘é€ä¸€æ¬¡
- âœ… åˆç†ä½¿ç”¨çŠ¶æ€åˆ‡æ¢

### 10.3 ç½‘ç»œä¼˜åŒ–

- âœ… ç›‘å¬ `onNetworkInfo` äº†è§£ç½‘ç»œçŠ¶å†µ
- âœ… ç½‘ç»œå·®æ—¶é™ä½å‘é€é¢‘ç‡
- âœ… ä½¿ç”¨ WebSocket ä¿æŒè¿æ¥

---

## 11. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### 11.1 å®‰å…¨é…ç½®

âš ï¸ **ä¸è¦å°†æ•æ„Ÿä¿¡æ¯ç¡¬ç¼–ç åœ¨ä»£ç ä¸­**ï¼š

```typescript
// âŒ é”™è¯¯åšæ³•
const appId = 'your-app-id'
const appSecret = 'your-app-secret'

// âœ… æ­£ç¡®åšæ³•ï¼šä»ç¯å¢ƒå˜é‡è¯»å–
const appId = import.meta.env.VITE_XINGYUN_APP_ID
const appSecret = import.meta.env.VITE_XINGYUN_APP_SECRET
```

### 11.2 HTTPSè¦æ±‚

ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ HTTPSï¼š

```nginx
server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location / {
        root /var/www/html;
        try_files $uri $uri/ /index.html;
    }
}
```

### 11.3 CDNåŠ é€Ÿ

å»ºè®®å°†é™æ€èµ„æºéƒ¨ç½²åˆ°CDNï¼š

```javascript
// vite.config.ts
export default {
  build: {
    rollupOptions: {
      output: {
        assetFileNames: 'assets/[name]-[hash][extname]'
      }
    }
  }
}
```

---

## 12. å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šåˆå§‹åŒ–å¤±è´¥

**ç°è±¡**ï¼šæ§åˆ¶å°æŠ¥é”™ "å®¹å™¨ä¸å­˜åœ¨"

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥ `#xingyun-sdk` å…ƒç´ æ˜¯å¦å­˜åœ¨
2. ç¡®è®¤ç»„ä»¶å·²å®Œå…¨æŒ‚è½½ï¼ˆåœ¨ `onMounted` ä¸­åˆå§‹åŒ–ï¼‰
3. æ£€æŸ¥å®¹å™¨æ˜¯å¦æœ‰æ˜ç¡®çš„å®½é«˜

### é—®é¢˜2ï¼šæ— æ³•é€šè¿‡IPè®¿é—®

**ç°è±¡**ï¼šé€šè¿‡ `http://192.168.x.x` è®¿é—®æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ `localhost` æˆ–åŸŸå + HTTPS
- SDKä¸æ”¯æŒIPåœ°å€è®¿é—®

### é—®é¢˜3ï¼šè¯­éŸ³æ’­æ”¾å»¶è¿Ÿ

**ç°è±¡**ï¼šæ•°å­—äººè¯´è¯æœ‰æ˜æ˜¾å»¶è¿Ÿ

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨æµå¼è¾“å‡º
2. é¦–æ¬¡ç§¯æ”’è¶³å¤Ÿçš„æ–‡æœ¬ï¼ˆ20-30å­—ï¼‰
3. æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿï¼ˆé€šè¿‡ `onNetworkInfo`ï¼‰

### é—®é¢˜4ï¼šç§¯åˆ†æ¶ˆè€—è¿‡å¿«

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¼€å‘æ—¶ä½¿ç”¨åŸºç¡€éŸ³è‰²
- ä¸ç”¨æ—¶åˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼
- é¿å…é¢‘ç¹è°ƒç”¨ speak

---

## 13. ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

### v0.1.0-alpha.72 (2025-10-18)
- æµé‡ä¼˜åŒ–ï¼šé™ä½æ•°æ®ä¼ è¾“
- åˆ‡æ¢ç¦»çº¿æ¨¡å¼æ—¶æ¸…é™¤å­—å¹•ã€åœæ­¢UIäº‹ä»¶å’ŒéŸ³é¢‘æ’­æ”¾
- Socketç¦»çº¿æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼
- ä¿®å¤IOS AudioContextçŠ¶æ€é—®é¢˜

### v0.1.0-alpha.66 (2025-10-17)
- ä¿®å¤ç¦»çº¿/åœ¨çº¿æ¨¡å¼æ•°å­—äººä¸¢å¤±é—®é¢˜
- ä¼˜åŒ–å¾®ä¿¡æµè§ˆå™¨å…¼å®¹æ€§

### v0.1.0-alpha.63 (2025-10-23)
- ä¿®å¤SDK closeæ—¶æœªé”€æ¯çš„é—®é¢˜
- å¢åŠ WebGLä¸Šä¸‹æ–‡ä¸¢å¤±çš„äºŒæ¬¡åˆå§‹åŒ–å¤„ç†

### v0.1.0-alpha.60 (2025-10-19)
- ä¿®å¤äººç‰©é‡å 
- ä¿®å¤éŸ³é¢‘æ’­æ”¾æ™šäºæ­£ç¡®äº‹ä»¶

### v0.1.0-alpha.45 (2025-10-15)
- æ–°å¢ `onVoiceStateChange` æ–¹æ³•
- æ–°å¢æ’ä»¶ç³»ç»Ÿ

---

## 14. æŠ€æœ¯æ”¯æŒ

### å®˜æ–¹èµ„æº

- ğŸ“– [å®˜æ–¹æ–‡æ¡£](https://xingyun3d.com/docs)
- ğŸŒ [é­”çæ˜Ÿäº‘å®˜ç½‘](https://xingyun3d.com/)
- ğŸ’¬ æŠ€æœ¯äº¤æµç¾¤ï¼šæ‰«ç è”ç³»å®˜æ–¹

### é¡¹ç›®ä»“åº“

- ğŸ”§ [GitHub Issues](https://github.com/your-repo/issues)
- ğŸ“§ é‚®ç®±ï¼šsupport@xingyun3d.com

---

## é™„å½•ï¼šå®Œæ•´ç¤ºä¾‹ä»£ç 

### ç¤ºä¾‹1ï¼šç®€å•å¯¹è¯

```typescript
// 1. åˆ›å»ºæœåŠ¡
const xingyunService = new XingyunService({
  containerId: '#xingyun-sdk',
  appId: 'your-app-id',
  appSecret: 'your-app-secret'
})

// 2. åˆå§‹åŒ–
await xingyunService.init()

// 3. è®©æ•°å­—äººè¯´è¯
xingyunService.speak('ä½ å¥½ï¼Œæˆ‘æ˜¯è·¯æ¼”æ•°å­—äººæ´ª', true, true)
```

### ç¤ºä¾‹2ï¼šæµå¼å¯¹è¯

```typescript
// 1. ç”¨æˆ·æé—®
const userQuestion = 'è¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±'

// 2. åˆ‡æ¢åˆ°æ€è€ƒçŠ¶æ€
xingyunService.think()

// 3. è°ƒç”¨å¤§æ¨¡å‹å¹¶æµå¼é©±åŠ¨æ•°å­—äºº
let isFirst = true
let buffer = ''

await llmService.sendStream(userQuestion, (chunk, done) => {
  buffer += chunk
  
  if (isFirst && buffer.length >= 20) {
    xingyunService.speak(buffer, true, false)
    buffer = ''
    isFirst = false
  } else if (!isFirst && buffer.length >= 10) {
    xingyunService.speak(buffer, false, false)
    buffer = ''
  }
  
  if (done && buffer) {
    xingyunService.speak(buffer, isFirst, true)
  }
})

// 4. å›åˆ°å¾…æœº
setTimeout(() => {
  xingyunService.interactiveidle()
}, 1000)
```

---

**ç¥æ‚¨æ¥å…¥é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜æ¬¢è¿åé¦ˆã€‚** ğŸš€

