# é…ç½®è¯´æ˜

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•é…ç½®é¡¹ç›®æ‰€éœ€çš„å„é¡¹å‚æ•°ã€‚

## é…ç½®æ–¹å¼

æœ¬é¡¹ç›®æ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼š

### æ–¹å¼1ï¼šé€šè¿‡ç•Œé¢é…ç½®ï¼ˆæ¨èï¼‰

1. å¯åŠ¨é¡¹ç›®åï¼Œç‚¹å‡»å³ä¸Šè§’çš„"é…ç½®"æŒ‰é’®
2. åœ¨å¼¹å‡ºçš„é…ç½®å¯¹è¯æ¡†ä¸­å¡«å†™å„é¡¹å‚æ•°
3. ç‚¹å‡»"ä¿å­˜é…ç½®"æŒ‰é’®
4. åˆ·æ–°é¡µé¢ä½¿é…ç½®ç”Ÿæ•ˆ

é…ç½®ä¿¡æ¯ä¼šä¿å­˜åœ¨æµè§ˆå™¨çš„ `localStorage` ä¸­ã€‚

### æ–¹å¼2ï¼šé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå‚è€ƒ `.env.example`ï¼‰ï¼š

```bash
# å¤åˆ¶æ¨¡æ¿æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘é…ç½®
vim .env
```

ç„¶ååœ¨ä»£ç ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```typescript
const appId = import.meta.env.VITE_XINGYUN_APP_ID || localStorage.getItem('xingyun_appId')
```

---

## é…ç½®é¡¹è¯´æ˜

### 1. é­”çæ˜Ÿäº‘é…ç½®

#### App ID
- **è·å–æ–¹å¼**ï¼šç™»å½• [é­”çæ˜Ÿäº‘å¹³å°](https://xingyun3d.com/)
- **ä½ç½®**ï¼šåº”ç”¨ä¸­å¿ƒ â†’ åˆ›å»ºé©±åŠ¨åº”ç”¨ â†’ è·å– App ID
- **ç¤ºä¾‹**ï¼š`1234567890abcdef`
- **å¿…å¡«**ï¼šâœ…

#### App Secret
- **è·å–æ–¹å¼**ï¼šä¸ App ID åŒæ—¶ç”Ÿæˆ
- **ä½ç½®**ï¼šåº”ç”¨ä¸­å¿ƒ â†’ åº”ç”¨è¯¦æƒ…
- **ç¤ºä¾‹**ï¼š`abcdefghijklmnopqrstuvwxyz123456`
- **å¿…å¡«**ï¼šâœ…
- **å®‰å…¨æç¤º**ï¼šè¯·å‹¿æ³„éœ²æˆ–æäº¤åˆ°ä»£ç ä»“åº“

#### Gateway Server
- **é»˜è®¤å€¼**ï¼š`https://nebula-agent.xingyun3d.com/user/v1/ttsa/session`
- **è¯´æ˜**ï¼šé­”çæ˜Ÿäº‘æœåŠ¡ç½‘å…³åœ°å€ï¼Œä¸€èˆ¬æ— éœ€ä¿®æ”¹
- **å¿…å¡«**ï¼šâœ…

---

### 2. å¤§æ¨¡å‹é…ç½®

#### æ¨¡å‹é€‰æ‹©

æ”¯æŒä»¥ä¸‹å¤§æ¨¡å‹ï¼š

##### è±†åŒ…ï¼ˆå­—èŠ‚è·³åŠ¨ï¼‰- æ¨è

**æ¨¡å‹åç§°**ï¼š
- `doubao-pro-32k` - æ€§èƒ½ç‰ˆï¼ˆæ¨èï¼‰
- `doubao-lite-32k` - è½»é‡ç‰ˆ

**è·å–API Key**ï¼š
1. è®¿é—® [ç«å±±å¼•æ“æ§åˆ¶å°](https://console.volcengine.com/ark)
2. åˆ›å»ºæ¨ç†æ¥å…¥ç‚¹
3. è·å– API Key

**Base URL**ï¼š`https://ark.cn-beijing.volces.com/api/v3`

**ç‰¹ç‚¹**ï¼š
- âœ… å“åº”é€Ÿåº¦å¿«
- âœ… ä¸­æ–‡ç†è§£èƒ½åŠ›å¼º
- âœ… æ€§ä»·æ¯”é«˜
- âœ… æ”¯æŒæµå¼è¾“å‡º

##### DeepSeek

**æ¨¡å‹åç§°**ï¼š`deepseek-chat`

**è·å–API Key**ï¼š
1. è®¿é—® [DeepSeekå¹³å°](https://platform.deepseek.com/)
2. æ³¨å†Œå¹¶åˆ›å»ºAPI Key

**Base URL**ï¼š`https://api.deepseek.com`

**ç‰¹ç‚¹**ï¼š
- âœ… ä»£ç èƒ½åŠ›å¼º
- âœ… æ¨ç†èƒ½åŠ›å¼º
- âœ… ä»·æ ¼ä¾¿å®œ

##### é€šä¹‰åƒé—®ï¼ˆé˜¿é‡Œäº‘ï¼‰

**æ¨¡å‹åç§°**ï¼š`qwen-plus`

**è·å–API Key**ï¼š
1. è®¿é—® [é˜¿é‡Œäº‘æ§åˆ¶å°](https://dashscope.console.aliyun.com/)
2. åˆ›å»ºAPI Key

**Base URL**ï¼š`https://dashscope.aliyuncs.com/compatible-mode/v1`

**ç‰¹ç‚¹**ï¼š
- âœ… ä¸­æ–‡èƒ½åŠ›ä¼˜ç§€
- âœ… ç”Ÿæ€å®Œå–„
- âœ… ç¨³å®šå¯é 

##### ChatGPTï¼ˆOpenAIï¼‰

**æ¨¡å‹åç§°**ï¼š
- `gpt-4` - GPT-4
- `gpt-3.5-turbo` - GPT-3.5

**è·å–API Key**ï¼š
1. è®¿é—® [OpenAIå¹³å°](https://platform.openai.com/)
2. åˆ›å»ºAPI Key

**Base URL**ï¼š`https://api.openai.com/v1`

**ç‰¹ç‚¹**ï¼š
- âœ… ç»¼åˆèƒ½åŠ›å¼º
- âœ… ç”Ÿæ€æˆç†Ÿ
- âš ï¸ éœ€è¦ç‰¹æ®Šç½‘ç»œç¯å¢ƒ

#### é…ç½®ç¤ºä¾‹

```typescript
// è±†åŒ…é…ç½®
{
  llmModel: 'doubao-pro-32k',
  llmApiKey: 'your-api-key',
  llmBaseUrl: 'https://ark.cn-beijing.volces.com/api/v3'
}

// DeepSeeké…ç½®
{
  llmModel: 'deepseek-chat',
  llmApiKey: 'sk-...',
  llmBaseUrl: 'https://api.deepseek.com'
}

// é€šä¹‰åƒé—®é…ç½®
{
  llmModel: 'qwen-plus',
  llmApiKey: 'sk-...',
  llmBaseUrl: 'https://dashscope.aliyuncs.com/compatible-mode/v1'
}

// ChatGPTé…ç½®
{
  llmModel: 'gpt-4',
  llmApiKey: 'sk-...',
  llmBaseUrl: 'https://api.openai.com/v1'
}
```

---

### 3. è¯­éŸ³è¯†åˆ«é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€è¯­éŸ³è¾“å…¥åŠŸèƒ½ï¼Œéœ€è¦é…ç½®ASRæœåŠ¡ã€‚

#### è…¾è®¯äº‘å®æ—¶è¯­éŸ³è¯†åˆ«

**è·å–é…ç½®**ï¼š
1. è®¿é—® [è…¾è®¯äº‘è¯­éŸ³è¯†åˆ«](https://cloud.tencent.com/product/asr)
2. å¼€é€šæœåŠ¡å¹¶åˆ›å»ºåº”ç”¨
3. è·å– AppIDã€SecretIdã€SecretKey

**é…ç½®é¡¹**ï¼š
```typescript
{
  asrAppId: '1234567890',
  asrSecretId: 'AKIDxxxxxxxxxxxxx',
  asrSecretKey: 'xxxxxxxxxxxxx'
}
```

#### é˜¿é‡Œäº‘å®æ—¶è¯­éŸ³è¯†åˆ«

**è·å–é…ç½®**ï¼š
1. è®¿é—® [é˜¿é‡Œäº‘æ™ºèƒ½è¯­éŸ³](https://ai.aliyun.com/nls)
2. å¼€é€šæœåŠ¡å¹¶åˆ›å»ºåº”ç”¨
3. è·å– AppKeyã€AccessKeyIdã€AccessKeySecret

**é…ç½®é¡¹**ï¼š
```typescript
{
  asrAppId: 'your-app-key',
  asrSecretId: 'your-access-key-id',
  asrSecretKey: 'your-access-key-secret'
}
```

#### æ³¨æ„äº‹é¡¹

âš ï¸ è¯­éŸ³è¯†åˆ«åŠŸèƒ½ä¸ºå¯é€‰é…ç½®ï¼Œä¸é…ç½®ä¸å½±å“æ–‡æœ¬å¯¹è¯åŠŸèƒ½ã€‚

âš ï¸ å½“å‰ç‰ˆæœ¬çš„ASRæœåŠ¡éœ€è¦æ ¹æ®å®é™…é€‰æ‹©çš„æœåŠ¡å•†è¿›è¡Œé€‚é…ï¼Œè¯¦è§ `src/services/asr.ts`ã€‚

---

## æœ¬åœ°å­˜å‚¨è¯´æ˜

é…ç½®ä¿¡æ¯ä¼šä¿å­˜åœ¨æµè§ˆå™¨çš„ `localStorage` ä¸­ï¼š

| Key | è¯´æ˜ |
|-----|------|
| `xingyun_appId` | é­”çæ˜Ÿäº‘ App ID |
| `xingyun_appSecret` | é­”çæ˜Ÿäº‘ App Secret |
| `llm_model` | å¤§æ¨¡å‹åç§° |
| `llm_apiKey` | å¤§æ¨¡å‹ API Key |
| `asr_appId` | è¯­éŸ³è¯†åˆ« App ID |
| `asr_secretId` | è¯­éŸ³è¯†åˆ« Secret ID |
| `asr_secretKey` | è¯­éŸ³è¯†åˆ« Secret Key |

### æ¸…é™¤é…ç½®

åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼š

```javascript
// æ¸…é™¤æ‰€æœ‰é…ç½®
localStorage.clear()

// æˆ–æ¸…é™¤ç‰¹å®šé…ç½®
localStorage.removeItem('xingyun_appId')
localStorage.removeItem('xingyun_appSecret')
```

---

## å®‰å…¨å»ºè®®

### å¼€å‘ç¯å¢ƒ

- âœ… å¯ä»¥ä½¿ç”¨ localStorage å­˜å‚¨é…ç½®
- âœ… ä¸è¦å°†é…ç½®æäº¤åˆ°ä»£ç ä»“åº“
- âœ… ä½¿ç”¨ `.gitignore` å¿½ç•¥ `.env` æ–‡ä»¶

### ç”Ÿäº§ç¯å¢ƒ

- âš ï¸ ä¸è¦åœ¨å‰ç«¯å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… ä½¿ç”¨åç«¯ä»£ç†APIè¯·æ±‚
- âœ… åœ¨æœåŠ¡ç«¯ç®¡ç†API Key
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡æ³¨å…¥é…ç½®
- âœ… å¯ç”¨HTTPS

### æ¨èæ¶æ„

```
å‰ç«¯ (Vue) 
  â†“ 
  â†“ åªä¼ è¾“ç”¨æˆ·æ¶ˆæ¯
  â†“
åç«¯ (Node.js/Python/Go)
  â†“
  â†“ æºå¸¦API Key
  â†“
å¤§æ¨¡å‹API / é­”çæ˜Ÿäº‘API
```

ç¤ºä¾‹åç«¯ä»£ç†ï¼š

```javascript
// Express.js ç¤ºä¾‹
app.post('/api/chat', async (req, res) => {
  const { message } = req.body
  
  // åœ¨åç«¯è°ƒç”¨å¤§æ¨¡å‹API
  const response = await fetch('https://api.xxx.com/chat', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${process.env.LLM_API_KEY}`, // ä»ç¯å¢ƒå˜é‡è¯»å–
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ message })
  })
  
  // è¿”å›ç»“æœç»™å‰ç«¯
  res.json(await response.json())
})
```

---

## é…ç½®éªŒè¯

### éªŒè¯é­”çæ˜Ÿäº‘é…ç½®

```bash
curl -X POST https://nebula-agent.xingyun3d.com/user/v1/ttsa/session \
  -H "Content-Type: application/json" \
  -d '{
    "app_id": "your-app-id",
    "app_secret": "your-app-secret"
  }'
```

### éªŒè¯å¤§æ¨¡å‹é…ç½®

```bash
# è±†åŒ…
curl -X POST https://ark.cn-beijing.volces.com/api/v3/chat/completions \
  -H "Authorization: Bearer your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "doubao-pro-32k",
    "messages": [{"role": "user", "content": "ä½ å¥½"}]
  }'
```

---

## å¸¸è§é—®é¢˜

### Q: é…ç½®ä¿å­˜åä¸ç”Ÿæ•ˆï¼Ÿ
A: åˆ·æ–°é¡µé¢ä½¿é…ç½®ç”Ÿæ•ˆï¼Œæˆ–æ¸…é™¤ç¼“å­˜åé‡è¯•ã€‚

### Q: API Keyæ— æ•ˆï¼Ÿ
A: 
1. æ£€æŸ¥Keyæ˜¯å¦æ­£ç¡®å¤åˆ¶ï¼ˆæ— å¤šä½™ç©ºæ ¼ï¼‰
2. ç¡®è®¤Keyæ˜¯å¦å·²æ¿€æ´»
3. æ£€æŸ¥è´¦æˆ·ä½™é¢æ˜¯å¦å……è¶³

### Q: è·¨åŸŸé—®é¢˜ï¼Ÿ
A: 
1. ä½¿ç”¨åç«¯ä»£ç†è¯·æ±‚
2. é…ç½®CORSï¼ˆä¸æ¨èç”Ÿäº§ç¯å¢ƒï¼‰

### Q: é…ç½®ä¸¢å¤±ï¼Ÿ
A: localStorageå¯èƒ½è¢«æ¸…é™¤ï¼Œå»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–åç«¯é…ç½®ã€‚

---

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é…ç½®é—®é¢˜ï¼Œè¯·ï¼š

1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸ
3. å‚è€ƒ [æ¥å…¥æŒ‡å—.md](./æ¥å…¥æŒ‡å—.md)
4. è”ç³»æŠ€æœ¯æ”¯æŒ

---

**ç¥æ‚¨é…ç½®é¡ºåˆ©ï¼** ğŸ‰

